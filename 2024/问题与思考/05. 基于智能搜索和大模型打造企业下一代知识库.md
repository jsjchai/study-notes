## 背景
> 知识库需求在各行各业中普遍存在，例如制造业中历史故障知识库、游戏社区平台的内容知识库、电商的商品推荐知识库和医疗健康领域的挂号推荐知识库系统等。为保证推荐系统的实效性和准确性，需要大量的数据/算法/软件工程师的人力投入和包括硬件在内的物力投入。其次，为了进一步提高搜索准确率，如何引导用户搜索描述更加准确和充分利用用户行为优化搜索引擎也是常见的用户痛点。此外，如何根据企业知识库直接给出用户提问的答案也是众多企业中会遇见的技术瓶颈。

## 核心内容
1. 智能搜索
* 传统仅依靠关键词匹配的分词搜索的方式在很多场景下可以提供快速有效的查询，但是也存在一些固有的局限性。例如匹配一些包括停用词在内的无关词汇，无法识别同义词和缺乏抽象能力。为了解决这些问题，本方案中一方面使用意图识别模型，对关键信息进行提取，从而可以有效的避免停用词等无法词汇对搜索造成的干扰。另一方面，引入 AI/ML 的方法来辅助实现语意搜索。具体来讲，使用同一个向量编码的模型对搜索语句和文档数据库进行语意编码，在检索的过程中，使用 knn 方法进行向量匹配。以下是一个传统分词搜索与语意向量搜索的对比展示。我们可以看到，使用向量搜索功能后，可以召回更多自然语意上相近而关键词无关的内容么，增加召回范围和提升搜索准确性。
2. 智能引导
* 造成搜索不准确的原因，一方面是由于搜索引擎本身的能力不足，另外一方面的原因是因为搜索的语句不够准确和具体。因此，本方案中提出了一种引导式的搜索机制来帮助检索人员逐步丰富输入的搜索语句，最终达到提升搜索准确性的目的。
* 提示词的获取：根据实际情况，可以采用人工打标、无监督聚类、有监督分类、大语言模型（LLM）等方法进行提取，并提前注入到数据库中。
3. 智能优化
* 通常情况下，由于知识库的迭代更新，检索的准确率可能会随时时间的推荐逐步降低，一方面是因为我们往往不能保证，数据库和搜索引擎一次性构建完成后就达到很好的效果。另外一方面是因为对于过时的知识没有进行有效的处理。因此，本方案提出以用户行为对搜索引擎进行持续优化。
* 具体来讲包括两个步骤
  * 用户行为收集：将历史用户的行为进行收集，例如用户对某个搜索词条的打分。
  * 模型训练和部署：通过用户行为，整理得到搜索词条和知识库之间的相关度。使用该相关度训练和部署一个重排模型，该重排模型可以根据历史的用户行为，给予用户更加偏好的内容更高的权重得分。
* 值得注意的是，该模型是基于传统机器学习模型 xgboost 的，所以所需要的训练数据量和推理所需要的资源都是很小的（例如只需要几十条数据和 t3.small 机型），因此可以基于不同的用户/用户群训练不同的重排模型，达到千人千面，个性化搜索的目的。
4. 智能问答
* 基于私有知识库进行问答是另外一个广泛应用的场景，例如智能客户聊天机器人系统，IT/HR 系统智能问答系统等。
* 如果仅使用搜索引擎，只能基于问题从数据库中提取与该问题相关的内容，而不能直接给出答案。
* 如果仅使用大语言模型（Large Language Model，LLM），不能基于私有知识库进行问答。一种可行的方式是将私有知识库和问题直接以 prompt 的形式直接一次性给到 LLM，然后让 LLM 给出回答。但是受限于 LLM Token 的限制，无法一次性输入过多的知识库。
5. 非结构化数据注入
* 可供搜索引擎进行检索的企业知识库是一种结构化的数据，但往往企业的原始知识都是以非结构化的数据进行存储的，来自多个渠道，也包含了多种格式，例如 Words，PDF，Excel 等
