# 事务
## 定义
> 事务将应用程序的多个读、写操作捆绑在一起成为一个逻辑操作单元。事务中的所有读写是一个执行的整体，整个事务要么成功（提交）、要么失败（中止或回滚）
## 目的
> 简化应用层的编程模型，提供安全性保证
## ACID
* **原子性**
* **一致性**
* **隔离性**
* **持久性**
## 单对象与多对象事务操作
### 单对象写入
* 有效防止多个客户端并发修改同一对象时的更新丢失问题
### 多对象事务的必要性
* 缺乏隔离性则容易出现并发性方面的问题
### 弱隔离级别
* 读-提交 
  * 防止脏读-读数据库时，只能看到已成功提交的数据
  * 防止脏写-写数据库时，只能覆盖已成功提交的数据
* 实现读-提交
  * 行级锁防止脏写
  * 维护旧值和当前持锁事务将要设置的新值-防止脏读
### 快照级别隔离与可重复读
* 不可重复读（或读倾斜）
  * 备份场景
  * 分析查询与完整性检查场景
* 实现快照级别隔离
  * 采用写锁来防止脏读
  * 多版本并发控制-保留对象多个不同的提交版本

