## 事件驱动型架构（EDA）
> 事件驱动型架构（EDA）是一种现代架构模式，由发布、使用或路由事件的小型解耦服务构建而成。

![image](https://github.com/jsjchai/study-notes/assets/13389058/565e994f-2cc5-4ec3-ac70-2c15042b428d)


## 优势
> 事件驱动型架构（EDA）可促进系统组件之间的松耦合，从而提高敏捷性。微服务可以独立扩展，失败时不会影响其他服务，并且可以降低工作流的复杂性。可以灵活地路由、缓冲和记录事件以用于审计目的。基于推送的事件流可以实时运行，从而降低了与创建和运行代码相关的成本，该代码不断地轮询系统以进行更改。
### 实现扩展和故障的独立性
> 通过解耦服务，事件驱动型架构中的组件可以独立扩展和失败，从而提高应用程序的弹性。随着服务之间集成数量的增加，这一点变得越来越重要。如果一个服务出现故障，其余的可以继续运行。
### 敏捷开发
> 借助事件驱动型架构和事件路由器，开发人员不再需要编写自定义代码来轮询、筛选和路由事件。事件路由器会自动筛选事件并将其推送给使用器。该路由器还将消除产生器和使用器服务之间进行繁重协调的必要性，从而提高开发人员的敏捷性。
### 构建可扩展系统
> 事件驱动型架构也是高度可扩展的。其他团队可以在不影响现有微服务的情况下扩展特性和添加功能。通过发布事件，应用程序可以与现有系统集成 — 未来的应用程序可以作为事件使用器轻松集成，而无需更改现有解决方案。
### 降低复杂性
> 微服务使开发人员和架构师能够分解复杂的工作流程。例如，他们可以将电子商务整体分解为具有单独库存、履行和会计服务的订单接受和支付流程。

### 轻松审核
> 事件驱动型架构中的事件路由器充当审核应用程序和定义策略的集中位置。这些策略可以限制谁能够发布与订阅到您的路由器，并控制哪些用户和资源有权限访问您的数据。您还可以对您的事件进行动态和静态加密

### 削减成本
> EDA 是基于推送的，因此一切都在事件本身出现在路由器中时按需发生。如此一来，您不用为持续轮询以检查事件付费。这意味着更少的网络带宽消耗、更低的 CPU 利用率、更少的闲置实例集容量，以及更少的 SSL/TLS 握手

## 挑战
### 可变延迟
> 与可能在单个设备上处理相同内存空间内的所有内容的整体式应用程序不同，事件驱动应用程序跨网络通信。这种设计引入了可变延迟。尽管整体式应用程序可能具有更低或更少的可变延迟，但这通常是以牺牲可扩展性和可用性为代价的
### 最终一致性
> 事件代表状态的变化。由于许多事件会在任一给定时间点流经架构中的不同服务，因此此类工作负载通常最终是一致的。 这使得处理事务、处理重复或确定系统的确切整体状态变得更加复杂
### 向调用者返回值
> 在许多情况下，基于事件的应用程序是异步的。这意味着调用者服务在继续其他工作之前不会等待来自其他服务的请求。EDA 的这一基本特征实现了可扩展性和灵活性；但是，它使传递返回值或工作流结果比在同步流中更复杂。
### 跨服务和功能调试
> 调试事件驱动系统不同于调试整体式应用程序。与所有基于微服务的应用程序以及传递事件的不同系统和服务一样，在发生错误时记录和重现多个服务的确切状态可能是一项挑战。由于每个服务和函数调用都有单独的日志文件，因此确定导致错误的特定事件发生了什么可能会更加复杂
### 编排
> 随着时间的推移，简单的工作流程变得更加复杂是很常见的。在典型的整体式应用中，这可能导致更紧密耦合的功能和服务组，以及复杂的代码处理路由和异常

## 应用场景
### 异构系统集成
> 如果您的系统在不同堆栈上运行，可以使用 EDA 在它们之间共享信息，而无需耦合。事件路由器会在系统之间建立间接性和互操作性，因此它们可以在保持独立性的同时交换消息和数据
### 跨区域、跨账户数据复制
> 通过使用事件路由器在系统之间传输数据，您可以独立于其他团队开发、扩展和部署服务。
### 资源状态监控和警报
> 您可以利用 EDA 来监控与接收有关任何异常、变动和更新的警报，而不用持续检查您的资源。这些资源可能包括存储桶、数据库表、无服务器函数、计算节点等等
### 扇出与并行处理
> 如果您需要操作多个系统以响应事件，则可以使用 EDA 对事件进行扇出，而不必编写自定义代码来推送到每个使用器。路由器会将事件推送到系统，每个系统可出于不同目的并行处理这些事件。
* 扇出 多个客户端从同一个通道读取数据，直到该通道关闭

## 参考文档
* [什么是 EDA？](https://aws.amazon.com/cn/what-is/eda/)
* [什么是事件驱动架构？](https://www.tibco.com/zh-hans/reference-center/what-is-event-driven-architecture)
